(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{5666:function(){},1075:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(2570)}])},4756:function(){},2570:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Y}});var t=s(5893),l=s(7294),r=s(1163),n=s(8885),i=s(9889),c=s(354),d=s(8297),o=s(3595),u=s(4960);let h=()=>{let[e,a]=(0,l.useState)(null),[s,t]=(0,l.useState)(!0),[r,i]=(0,l.useState)(null),{user:c}=(0,n.a)();return(0,l.useEffect)(()=>{if(!c){a(null),t(!1);return}(async()=>{try{t(!0);let e=await u.W.getUserProfile(c.uid);a(e)}catch(e){i(e.message)}finally{t(!1)}})()},[c]),{profile:e,loading:s,error:r,updateProfile:async e=>{if(c)try{return await u.W.updateUserProfile(c.uid,e),a(a=>({...a,...e})),!0}catch(e){return i(e.message),!1}}}};var x=s(3736),m=s(8387);let f=(0,m.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),v=(0,m.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var p=()=>{var e,a,s;let{profile:r,loading:n,updateProfile:u}=h(),[m,p]=(0,l.useState)(!1),[j,y]=(0,l.useState)({name:"",email:"",phone:"",avatar:""}),g=async e=>{e.preventDefault(),await u(j)&&p(!1)};return n?(0,t.jsx)("div",{children:"Loading profile..."}):(0,t.jsxs)(i.Zb,{className:"w-full max-w-2xl",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center justify-between",children:["Your Profile",!m&&(0,t.jsx)(c.z,{onClick:()=>{y({name:(null==r?void 0:r.name)||"",email:(null==r?void 0:r.email)||"",phone:(null==r?void 0:r.phone)||"",avatar:(null==r?void 0:r.avatar)||""}),p(!0)},variant:"outline",children:"Edit Profile"})]})}),(0,t.jsx)(i.aY,{children:m?(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(x.qE,{className:"h-20 w-20",children:[(0,t.jsx)(x.F$,{src:j.avatar}),(0,t.jsx)(x.Q5,{children:(null===(e=j.name)||void 0===e?void 0:e.charAt(0))||"U"})]}),(0,t.jsx)(d.I,{placeholder:"Avatar URL",value:j.avatar,onChange:e=>y({...j,avatar:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{htmlFor:"name",children:"Name"}),(0,t.jsx)(d.I,{id:"name",value:j.name,onChange:e=>y({...j,name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{htmlFor:"email",children:"Email"}),(0,t.jsx)(d.I,{id:"email",type:"email",value:j.email,onChange:e=>y({...j,email:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{htmlFor:"phone",children:"Phone"}),(0,t.jsx)(d.I,{id:"phone",value:j.phone,onChange:e=>y({...j,phone:e.target.value})})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(c.z,{type:"submit",children:"Save Changes"}),(0,t.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(x.qE,{className:"h-20 w-20",children:[(0,t.jsx)(x.F$,{src:null==r?void 0:r.avatar}),(0,t.jsx)(x.Q5,{children:(null==r?void 0:null===(a=r.name)||void 0===a?void 0:a.charAt(0))||"U"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:null==r?void 0:r.name}),(0,t.jsxs)("p",{className:"text-gray-500",children:["Member since ",null==r?void 0:null===(s=r.createdAt)||void 0===s?void 0:s.toDate().toLocaleDateString()]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("span",{children:null==r?void 0:r.email})]}),(null==r?void 0:r.phone)&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("span",{children:null==r?void 0:r.phone})]})]})]})})]})};let j=()=>{let[e,a]=(0,l.useState)([]),[s,t]=(0,l.useState)(!0),[r,i]=(0,l.useState)(null),{user:c}=(0,n.a)();return(0,l.useEffect)(()=>{if(!c){a([]),t(!1);return}(async()=>{try{t(!0);let e=await u.W.getSavedDeals(c.uid);a(e)}catch(e){i(e.message)}finally{t(!1)}})()},[c]),{savedDeals:e,loading:s,error:r,saveDeal:async e=>{if(!c)return!1;try{return await u.W.saveDeal(c.uid,e),a(a=>[...a,e]),!0}catch(e){return i(e.message),!1}},unsaveDeal:async e=>{if(!c)return!1;try{return await u.W.unsaveDeal(c.uid,e),a(a=>a.filter(a=>a!==e)),!0}catch(e){return i(e.message),!1}}}};var y=s(3055),g=s(5333),N=s(5666),b=()=>{let{savedDeals:e,loading:a,unsaveDeal:s}=j();return a?(0,t.jsx)("div",{children:"Loading saved deals..."}):(0,t.jsxs)(i.Zb,{className:"w-full",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{children:"Saved Deals"})}),(0,t.jsx)(i.aY,{children:0===e.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(N.BookmarkX,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsx)("p",{className:"mt-4 text-gray-500",children:"No saved deals yet"})]}):(0,t.jsx)(g.x,{className:"h-[600px] pr-4",children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6",children:e.map(e=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(y.Z,{deal:e}),(0,t.jsx)("button",{onClick:()=>s(e.id),className:"absolute top-2 right-2 p-1 bg-white rounded-full shadow hover:bg-gray-100",children:(0,t.jsx)(N.BookmarkX,{className:"h-5 w-5 text-gray-600"})})]},e.id))})})})]})},w=s(6206),k=s(8771),S=s(5360),P=s(7342),C=s(9981),E=s(5320),_="Switch",[D,A]=(0,S.b)(_),[M,W]=D(_),z=l.forwardRef((e,a)=>{let{__scopeSwitch:s,name:r,checked:n,defaultChecked:i,required:c,disabled:d,value:o="on",onCheckedChange:u,form:h,...x}=e,[m,f]=l.useState(null),v=(0,k.e)(a,e=>f(e)),p=l.useRef(!1),j=!m||h||!!m.closest("form"),[y=!1,g]=(0,P.T)({prop:n,defaultProp:i,onChange:u});return(0,t.jsxs)(M,{scope:s,checked:y,disabled:d,children:[(0,t.jsx)(E.WV.button,{type:"button",role:"switch","aria-checked":y,"aria-required":c,"data-state":q(y),"data-disabled":d?"":void 0,disabled:d,value:o,...x,ref:v,onClick:(0,w.M)(e.onClick,e=>{g(e=>!e),j&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})}),j&&(0,t.jsx)(R,{control:m,bubbles:!p.current,name:r,value:o,checked:y,required:c,disabled:d,form:h,style:{transform:"translateX(-100%)"}})]})});z.displayName=_;var L="SwitchThumb",Z=l.forwardRef((e,a)=>{let{__scopeSwitch:s,...l}=e,r=W(L,s);return(0,t.jsx)(E.WV.span,{"data-state":q(r.checked),"data-disabled":r.disabled?"":void 0,...l,ref:a})});Z.displayName=L;var R=e=>{let{control:a,checked:s,bubbles:r=!0,...n}=e,i=l.useRef(null),c=function(e){let a=l.useRef({value:e,previous:e});return l.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}(s),d=function(e){let[a,s]=l.useState(void 0);return(0,C.b)(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});let a=new ResizeObserver(a=>{let t,l;if(!Array.isArray(a)||!a.length)return;let r=a[0];if("borderBoxSize"in r){let e=r.borderBoxSize,a=Array.isArray(e)?e[0]:e;t=a.inlineSize,l=a.blockSize}else t=e.offsetWidth,l=e.offsetHeight;s({width:t,height:l})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}s(void 0)},[e]),a}(a);return l.useEffect(()=>{let e=i.current,a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==s&&a){let t=new Event("click",{bubbles:r});a.call(e,s),e.dispatchEvent(t)}},[c,s,r]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:i,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function q(e){return e?"checked":"unchecked"}var O=s(7849);let U=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(z,{className:(0,O.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...l,ref:a,children:(0,t.jsx)(Z,{className:(0,O.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});U.displayName=z.displayName;var F=s(4756);let H=()=>{let[e,a]=(0,l.useState)({}),[s,t]=(0,l.useState)(!0),[r,i]=(0,l.useState)(null),{user:c}=(0,n.a)();return(0,l.useEffect)(()=>{if(!c){a({}),t(!1);return}(async()=>{try{t(!0);let e=await u.W.getPreferences(c.uid);a(e)}catch(e){i(e.message)}finally{t(!1)}})()},[c]),{preferences:e,loading:s,error:r,updatePreferences:async e=>{if(!c)return!1;try{return await u.W.updatePreferences(c.uid,e),a(a=>({...a,...e})),!0}catch(e){return i(e.message),!1}}}},I=(0,m.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),T=(0,m.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),B=(0,m.Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);var X=()=>{let{preferences:e,loading:a,updatePreferences:s}=H(),[r,n]=(0,l.useState)(e),d=async()=>{await s(r)};return a?(0,t.jsx)("div",{children:"Loading preferences..."}):(0,t.jsxs)(i.Zb,{className:"w-full max-w-2xl",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{children:"Notification Preferences"})}),(0,t.jsxs)(i.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(I,{className:"h-5 w-5"}),(0,t.jsx)(o._,{htmlFor:"price-alerts",children:"Price Drop Alerts"})]}),(0,t.jsx)(U,{id:"price-alerts",checked:r.priceAlerts,onCheckedChange:e=>n(a=>({...a,priceAlerts:e}))})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f,{className:"h-5 w-5"}),(0,t.jsx)(o._,{htmlFor:"email-notifications",children:"Email Notifications"})]}),(0,t.jsx)(U,{id:"email-notifications",checked:r.emailNotifications,onCheckedChange:e=>n(a=>({...a,emailNotifications:e}))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(T,{className:"h-5 w-5"}),(0,t.jsx)(o._,{children:"Minimum Discount Percentage"})]}),(0,t.jsx)(F.Slider,{value:[r.minDiscountPercent||0],max:100,step:5,onValueChange:e=>{let[a]=e;return n(e=>({...e,minDiscountPercent:a}))}}),(0,t.jsxs)("div",{className:"text-right text-sm text-gray-500",children:[r.minDiscountPercent,"%"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(B,{className:"h-5 w-5"}),(0,t.jsx)(o._,{children:"Preferred Categories"})]})})]}),(0,t.jsx)(c.z,{onClick:d,className:"w-full",children:"Save Preferences"})]})]})},V=s(529);function Y(){let{user:e,loading:a}=(0,n.a)(),s=(0,r.useRouter)();return((0,l.useEffect)(()=>{a||e||s.push("/login")},[e,a,s]),a)?(0,t.jsx)("div",{children:"Loading..."}):e?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"My Account"}),(0,t.jsxs)(V.mQ,{defaultValue:"profile",className:"space-y-8",children:[(0,t.jsxs)(V.dr,{children:[(0,t.jsx)(V.SP,{value:"profile",children:"Profile"}),(0,t.jsx)(V.SP,{value:"saved",children:"Saved Deals"}),(0,t.jsx)(V.SP,{value:"preferences",children:"Preferences"})]}),(0,t.jsx)(V.nU,{value:"profile",children:(0,t.jsx)(p,{})}),(0,t.jsx)(V.nU,{value:"saved",children:(0,t.jsx)(b,{})}),(0,t.jsx)(V.nU,{value:"preferences",children:(0,t.jsx)(X,{})})]})]}):null}}},function(e){e.O(0,[774,16,257,329,7,888,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);