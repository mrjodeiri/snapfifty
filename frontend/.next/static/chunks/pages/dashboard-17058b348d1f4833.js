(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{5666:function(){},1075:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(6836)}])},4756:function(){},6836:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Q}});var l=s(5893),t=s(7294),r=s(1163),n=s(8885),i=s(9889),c=s(354),d=s(8297),o=s(3595),u=s(4960);let h=()=>{let[e,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(!0),[r,i]=(0,t.useState)(null),{user:c}=(0,n.a)();return(0,t.useEffect)(()=>{if(!c){a(null),l(!1);return}(async()=>{try{l(!0);let e=await u.W.getUserProfile(c.uid);a(e)}catch(e){i(e.message)}finally{l(!1)}})()},[c]),{profile:e,loading:s,error:r,updateProfile:async e=>{if(c)try{return await u.W.updateUserProfile(c.uid,e),a(a=>({...a,...e})),!0}catch(e){return i(e.message),!1}}}};var x=s(3736),m=s(8387);let v=(0,m.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),f=(0,m.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var p=()=>{var e,a,s;let{profile:r,loading:n,updateProfile:u}=h(),[m,p]=(0,t.useState)(!1),[j,y]=(0,t.useState)({name:"",email:"",phone:"",avatar:""}),g=async e=>{e.preventDefault(),await u(j)&&p(!1)};return n?(0,l.jsx)("div",{children:"Loading profile..."}):(0,l.jsxs)(i.Zb,{className:"w-full max-w-2xl",children:[(0,l.jsx)(i.Ol,{children:(0,l.jsxs)(i.ll,{className:"flex items-center justify-between",children:["Your Profile",!m&&(0,l.jsx)(c.z,{onClick:()=>{y({name:(null==r?void 0:r.name)||"",email:(null==r?void 0:r.email)||"",phone:(null==r?void 0:r.phone)||"",avatar:(null==r?void 0:r.avatar)||""}),p(!0)},variant:"outline",children:"Edit Profile"})]})}),(0,l.jsx)(i.aY,{children:m?(0,l.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(x.qE,{className:"h-20 w-20",children:[(0,l.jsx)(x.F$,{src:j.avatar}),(0,l.jsx)(x.Q5,{children:(null===(e=j.name)||void 0===e?void 0:e.charAt(0))||"U"})]}),(0,l.jsx)(d.I,{placeholder:"Avatar URL",value:j.avatar,onChange:e=>y({...j,avatar:e.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(o._,{htmlFor:"name",children:"Name"}),(0,l.jsx)(d.I,{id:"name",value:j.name,onChange:e=>y({...j,name:e.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(o._,{htmlFor:"email",children:"Email"}),(0,l.jsx)(d.I,{id:"email",type:"email",value:j.email,onChange:e=>y({...j,email:e.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(o._,{htmlFor:"phone",children:"Phone"}),(0,l.jsx)(d.I,{id:"phone",value:j.phone,onChange:e=>y({...j,phone:e.target.value})})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(c.z,{type:"submit",children:"Save Changes"}),(0,l.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"})]})]}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(x.qE,{className:"h-20 w-20",children:[(0,l.jsx)(x.F$,{src:null==r?void 0:r.avatar}),(0,l.jsx)(x.Q5,{children:(null==r?void 0:null===(a=r.name)||void 0===a?void 0:a.charAt(0))||"U"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-semibold",children:null==r?void 0:r.name}),(0,l.jsxs)("p",{className:"text-gray-500",children:["Member since ",null==r?void 0:null===(s=r.createdAt)||void 0===s?void 0:s.toDate().toLocaleDateString()]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(v,{className:"h-5 w-5 text-gray-500"}),(0,l.jsx)("span",{children:null==r?void 0:r.email})]}),(null==r?void 0:r.phone)&&(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(f,{className:"h-5 w-5 text-gray-500"}),(0,l.jsx)("span",{children:null==r?void 0:r.phone})]})]})]})})]})};let j=()=>{let[e,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(!0),[r,i]=(0,t.useState)(null),{user:c}=(0,n.a)();return(0,t.useEffect)(()=>{if(!c){a([]),l(!1);return}(async()=>{try{l(!0);let e=await u.W.getSavedDeals(c.uid);a(e)}catch(e){i(e.message)}finally{l(!1)}})()},[c]),{savedDeals:e,loading:s,error:r,saveDeal:async e=>{if(!c)return!1;try{return await u.W.saveDeal(c.uid,e),a(a=>[...a,e]),!0}catch(e){return i(e.message),!1}},unsaveDeal:async e=>{if(!c)return!1;try{return await u.W.unsaveDeal(c.uid,e),a(a=>a.filter(a=>a!==e)),!0}catch(e){return i(e.message),!1}}}};var y=s(3055),g=s(9477),N=s(5666),b=()=>{let{savedDeals:e,loading:a,unsaveDeal:s}=j();return a?(0,l.jsx)("div",{children:"Loading saved deals..."}):(0,l.jsxs)(i.Zb,{className:"w-full",children:[(0,l.jsx)(i.Ol,{children:(0,l.jsx)(i.ll,{children:"Saved Deals"})}),(0,l.jsx)(i.aY,{children:0===e.length?(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(N.BookmarkX,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,l.jsx)("p",{className:"mt-4 text-gray-500",children:"No saved deals yet"})]}):(0,l.jsx)(g.x,{className:"h-[600px] pr-4",children:(0,l.jsx)("div",{className:"grid grid-cols-1 gap-6",children:e.map(e=>(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(y.Z,{deal:e}),(0,l.jsx)("button",{onClick:()=>s(e.id),className:"absolute top-2 right-2 p-1 bg-white rounded-full shadow hover:bg-gray-100",children:(0,l.jsx)(N.BookmarkX,{className:"h-5 w-5 text-gray-600"})})]},e.id))})})})]})},w=s(6206),k=s(8771),P=s(5360),S=s(7342),C=s(7546),E=s(5320),_="Switch",[D,M]=(0,P.b)(_),[A,L]=D(_),Z=t.forwardRef((e,a)=>{let{__scopeSwitch:s,name:r,checked:n,defaultChecked:i,required:c,disabled:d,value:o="on",onCheckedChange:u,form:h,...x}=e,[m,v]=t.useState(null),f=(0,k.e)(a,e=>v(e)),p=t.useRef(!1),j=!m||h||!!m.closest("form"),[y=!1,g]=(0,S.T)({prop:n,defaultProp:i,onChange:u});return(0,l.jsxs)(A,{scope:s,checked:y,disabled:d,children:[(0,l.jsx)(E.WV.button,{type:"button",role:"switch","aria-checked":y,"aria-required":c,"data-state":F(y),"data-disabled":d?"":void 0,disabled:d,value:o,...x,ref:f,onClick:(0,w.M)(e.onClick,e=>{g(e=>!e),j&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})}),j&&(0,l.jsx)(U,{control:m,bubbles:!p.current,name:r,value:o,checked:y,required:c,disabled:d,form:h,style:{transform:"translateX(-100%)"}})]})});Z.displayName=_;var W="SwitchThumb",R=t.forwardRef((e,a)=>{let{__scopeSwitch:s,...t}=e,r=L(W,s);return(0,l.jsx)(E.WV.span,{"data-state":F(r.checked),"data-disabled":r.disabled?"":void 0,...t,ref:a})});R.displayName=W;var U=e=>{let{control:a,checked:s,bubbles:r=!0,...n}=e,i=t.useRef(null),c=function(e){let a=t.useRef({value:e,previous:e});return t.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}(s),d=(0,C.t)(a);return t.useEffect(()=>{let e=i.current,a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==s&&a){let l=new Event("click",{bubbles:r});a.call(e,s),e.dispatchEvent(l)}},[c,s,r]),(0,l.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:i,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function F(e){return e?"checked":"unchecked"}var O=s(3161);let q=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(Z,{className:(0,O.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:a,children:(0,l.jsx)(R,{className:(0,O.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});q.displayName=Z.displayName;var I=s(4756);let T=()=>{let[e,a]=(0,t.useState)({}),[s,l]=(0,t.useState)(!0),[r,i]=(0,t.useState)(null),{user:c}=(0,n.a)();return(0,t.useEffect)(()=>{if(!c){a({}),l(!1);return}(async()=>{try{l(!0);let e=await u.W.getPreferences(c.uid);a(e)}catch(e){i(e.message)}finally{l(!1)}})()},[c]),{preferences:e,loading:s,error:r,updatePreferences:async e=>{if(!c)return!1;try{return await u.W.updatePreferences(c.uid,e),a(a=>({...a,...e})),!0}catch(e){return i(e.message),!1}}}};var z=s(5338);let X=(0,m.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),H=(0,m.Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);var V=()=>{let{preferences:e,loading:a,updatePreferences:s}=T(),[r,n]=(0,t.useState)(e),d=async()=>{await s(r)};return a?(0,l.jsx)("div",{children:"Loading preferences..."}):(0,l.jsxs)(i.Zb,{className:"w-full max-w-2xl",children:[(0,l.jsx)(i.Ol,{children:(0,l.jsx)(i.ll,{children:"Notification Preferences"})}),(0,l.jsxs)(i.aY,{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(z.Z,{className:"h-5 w-5"}),(0,l.jsx)(o._,{htmlFor:"price-alerts",children:"Price Drop Alerts"})]}),(0,l.jsx)(q,{id:"price-alerts",checked:r.priceAlerts,onCheckedChange:e=>n(a=>({...a,priceAlerts:e}))})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(v,{className:"h-5 w-5"}),(0,l.jsx)(o._,{htmlFor:"email-notifications",children:"Email Notifications"})]}),(0,l.jsx)(q,{id:"email-notifications",checked:r.emailNotifications,onCheckedChange:e=>n(a=>({...a,emailNotifications:e}))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(X,{className:"h-5 w-5"}),(0,l.jsx)(o._,{children:"Minimum Discount Percentage"})]}),(0,l.jsx)(I.Slider,{value:[r.minDiscountPercent||0],max:100,step:5,onValueChange:e=>{let[a]=e;return n(e=>({...e,minDiscountPercent:a}))}}),(0,l.jsxs)("div",{className:"text-right text-sm text-gray-500",children:[r.minDiscountPercent,"%"]})]}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(H,{className:"h-5 w-5"}),(0,l.jsx)(o._,{children:"Preferred Categories"})]})})]}),(0,l.jsx)(c.z,{onClick:d,className:"w-full",children:"Save Preferences"})]})]})},Y=s(529);function Q(){let{user:e,loading:a}=(0,n.a)(),s=(0,r.useRouter)();return((0,t.useEffect)(()=>{a||e||s.push("/login")},[e,a,s]),a)?(0,l.jsx)("div",{children:"Loading..."}):e?(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"My Account"}),(0,l.jsxs)(Y.mQ,{defaultValue:"profile",className:"space-y-8",children:[(0,l.jsxs)(Y.dr,{children:[(0,l.jsx)(Y.SP,{value:"profile",children:"Profile"}),(0,l.jsx)(Y.SP,{value:"saved",children:"Saved Deals"}),(0,l.jsx)(Y.SP,{value:"preferences",children:"Preferences"})]}),(0,l.jsx)(Y.nU,{value:"profile",children:(0,l.jsx)(p,{})}),(0,l.jsx)(Y.nU,{value:"saved",children:(0,l.jsx)(b,{})}),(0,l.jsx)(Y.nU,{value:"preferences",children:(0,l.jsx)(V,{})})]})]}):null}}},function(e){e.O(0,[46,475,774,888,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);